<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Getting input values from different sources</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="introduction_PAIOF_framework.html" title="Chapter 4. Interacting with applications (PAIOF framework)"><link rel="prev" href="t3_command_line_utility.html" title="Creating a command line utility"><link rel="next" href="t3_output_options.html" title="Output destinations, formats and contents"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Getting input values from different sources</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="t3_command_line_utility.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><th width="60%" align="center">Chapter 4. Interacting with applications (PAIOF framework)</th><td width="20%" align="right"> <a accesskey="n" href="t3_output_options.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="t3_input_sources"></a>Getting input values from different sources</h2></div></div></div><p>One practical feature is that PAIOF lets you get values for input parameters from the following input sources:</p><div class="orderedlist"><ol type="1"><li>command line</li><li>console prompts</li><li>GUI prompts</li><li>files</li><li>URLs</li><li>the operating system's clipboard</li><li>the operating system's environment variables</li><li>the operating system's piping facility</li><li>a socket (not yet implemented at the time of writing)</li><li>speech recognition (not yet implemented at the time of writing)</li></ol></div><p>For a single command execution you can also combine different input sources. For instance some parameters could be read from a local file and others retrieved from a URL.</p><p>Here are some examples:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">For brevity, only the Windows command syntax is displayed in the following examples, except in cases where Linux/Windows syntaxes are different. Please remember that for each command entered in a Linux terminal you have to type <code class="code">./run.sh</code> instead of just <code class="code">run</code>.</td></tr></table></div><br><p>To prompt for each parameter individually in the console type:</p><pre class="programlisting">run add_contribution @input:console</pre><p>Note that in the above instruction we use a so-called <em class="firstterm">meta-parameter</em> (<code class="code">@input</code>). Meta parameters always start with the symbol <code class="code">@</code>. They are reserved for PAIOF and are used to specify additional information for PAIOF (such as where to get input from).</p><p>After hitting the &lt;Enter&gt; key you will be asked to enter a value for each parameter. The screen will look like this:</p><pre class="screen">&gt;run add_contribution @input:console
first_name:
Pierre
last_name:
Richard
random_number:
4
Result: Pierre Richard contributed '4' on 2012-05-16 12:28:42</pre><br><p>Instead of typing parameters in the console you can also instruct PAIOF to prompt for the values in popup windows:</p><pre class="programlisting">run add_contribution @input:gui</pre><p>The window that prompts for parameter <code class="code">first_name</code> looks as follows:</p><div class="figure"><a name="first_name_prompt"></a><p class="title"><b>Figure 4.2. </b></p><div class="figure-contents"><div class="mediaobject"><img src="first_name_prompt.jpg" alt="A PAIOF window that prompts to enter the first name"></div></div></div><br class="figure-break"><br><p>Input parameters can also be read from a file.</p><p>In your project's sub-directory <code class="code">run/random_arcs/</code> create directory <code class="code">tests/</code>. Then create file <code class="code">run/random_arcs/tests/params.txt</code> with the following content:</p><pre class="programlisting">first_name:"Nicolas" last_name:"Paganini" random_number:15</pre><p>Now execute:</p><pre class="programlisting">on Linux:
./run.sh add_contribution @input: '"file tests/params.txt"'
on Windows:
run add_contribution @input: "file tests/params.txt"</pre><br><p>You can <span class="emphasis"><em>combine</em></span> different input sources.</p><p>Sometimes, for example, it is useful to read some parameters (but not all) from a file and then prompt for the remaining parameters in the console.</p><p>Modify file <code class="code">params.txt</code> so that the content is now:</p><pre class="programlisting">first_name:"Nicolas" last_name:"Paganini"</pre><p>Then execute:</p><pre class="programlisting">on Linux:
./run.sh add_contribution @input: [ '"file tests/params.txt"' , console ]
on Windows:
run add_contribution @input: [ "file tests/params.txt" , console ]</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Please enter the command as shown above, including the spaces.</td></tr></table></div><p>Now PAIOF reads <code class="code">first_name</code> and <code class="code">last_name</code> from the file and only prompts for <code class="code">random_number</code>.</p><br><p>If you want PAIOF to also prompt for <code class="code">first_name</code> and <code class="code">last_name</code>, but with default values read from the file you simply have to replace <code class="code">console</code> by <code class="code">console_all</code>:</p><pre class="programlisting">on Linux:
./run.sh add_contribution @input: [ '"file tests/params.txt"' , console_all ]
on Windows:
run add_contribution @input: [ "file tests/params.txt" , console_all ]</pre><p>The screen will look like this (note the default values read from the file displayed between square brackets):</p><pre class="screen">&gt;run add_contribution @input: [ "file tests/params.txt" , console_all ]
first_name:
[Nicolas] Romeo
last_name:
[Paganini]
random_number:
5
Result: Romeo Paganini contributed '5' on 2012-05-16 12:50:31</pre><br><p>Instead of reading parameters from a file you can also get them from a URL:</p><pre class="programlisting">on Linux:
./run.sh add_contribution @input: '"URL http://www.your_company.com/random_arcs/get_contribution_parameters"'
on Windows:
run add_contribution @input: "URL http://www.your_company.com/random_arcs/get_contribution_parameters"</pre><br><p>Or you can get the parameters from the operating system's clipboard. Copy the following text to the system clipboard</p><pre class="programlisting">first_name:"Nicolas" last_name:"Paganini" random_number:15</pre><p>Then execute:</p><pre class="programlisting">run add_contribution @input: clip</pre><br><p>Parameters can also be read from the operating system's environment variables set by another application. </p><p>To test this you can for example create a system script file with the following content and then execute it:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="code">.sh</code> file in Linux:</p><pre class="programlisting">export first_name=foo
export last_name=bar
export random_number=10
./run.sh add_contribution @input:env</pre></li><li><p><code class="code">.bat</code> file in Windows:</p><pre class="programlisting">set first_name=foo
set last_name=bar
set random_number=10
run add_contribution @input:env</pre></li></ul></div><p>You can also test it with a single instruction typed in a terminal window:</p><div class="itemizedlist"><ul type="disc"><li><p>in Linux:</p><pre class="programlisting">export first_name=foo &amp;&amp; export last_name=bar &amp;&amp; export random_number=10 &amp;&amp; ./run.sh add_contribution @input:env</pre></li><li><p>in Windows:</p><pre class="programlisting">set first_name=foo&amp;&amp; set last_name=bar&amp;&amp; set random_number=10&amp;&amp; run add_contribution @input:env</pre></li></ul></div><br><p>You can also use the operating system's piping facility. An application could write the parameters to the system's standard <span class="emphasis"><em>output</em></span> device and your application can then read them from the system's standard <span class="emphasis"><em>input</em></span> device.</p><p>To test this you can execute the following command in your operating system:</p><div class="itemizedlist"><ul type="disc"><li><p>in Linux:</p><pre class="programlisting">echo first_name:"Nicolas" last_name:"Paganini" random_number:15 | ./run.sh add_contribution @input:in</pre></li><li><p>in Windows:</p><pre class="programlisting">echo first_name:"Nicolas" last_name:"Paganini" random_number:15 | run add_contribution @input:in</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="t3_command_line_utility.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><td width="20%" align="center"><a accesskey="u" href="introduction_PAIOF_framework.html"><img src="images/up.png" alt="Go up one level" title="Go up one level"></a></td><td width="40%" align="right"> <a accesskey="n" href="t3_output_options.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr><tr><td width="40%" align="left" valign="top">Creating a command line utility </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Table of contents" title="Table of contents"></a></td><td width="40%" align="right" valign="top"> Output destinations, formats and contents</td></tr></table></div></body></html>
