<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 8. Script instructions</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="bk01pt02.html" title="Part II. Language basics"><link rel="prev" href="bk01pt02ch07s07.html" title="test script"><link rel="next" href="bk01pt02ch08s02.html" title="Script execution"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 8. Script instructions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bk01pt02ch07s07.html">Prev</a> </td><th width="60%" align="center">Part II. Language basics</th><td width="20%" align="right"> <a accesskey="n" href="bk01pt02ch08s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="script_instructions"></a>Chapter 8. Script instructions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="bk01pt02ch08.html#assignment_instructions">Assignments</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08.html#variable_declaration_instruction">Variable declaration instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08.html#constant_declaration_instruction">Constant declaration instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08.html#assignment_instruction">Assignment instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08.html#assignment_tail">Assignment tail</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s02.html">Script execution</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s02.html#object_command_execution_instruction">Object command execution instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s02s02.html">Script execution instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s02s03.html">Script execution tail</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s03.html">Flow control</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s03.html#if_then_else_instruction"><code class="code">if then else</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s03s02.html"><code class="code">case type of</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s03s03.html"><code class="code">exit script</code> instruction</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s04.html">Loops</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s04.html#repeat_while_instruction"><code class="code">repeat while</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s02.html"><code class="code">repeat for each</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s03.html"><code class="code">repeat from to</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s04.html"><code class="code">repeat times</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s05.html"><code class="code">repeat forever</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s06.html">repeat tail</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s07.html"><code class="code">exit repeat</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s04s08.html"><code class="code">next repeat</code> instruction</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s05.html">Events</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s05.html#generate_event_instruction"><code class="code">generate event</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s05s02.html"><code class="code">on event</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s05s03.html"><code class="code">stop event handler</code> instruction</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s06.html">Error handling</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s06.html#check_instruction"><code class="code">check</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s06s02.html"><code class="code">check script</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s06s03.html"><code class="code">error</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s06s04.html"><code class="code">condition</code></a></span></dt><dt><span class="section"><a href="bk01pt02ch08s06s05.html"><code class="code">error info</code></a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s07.html">Testing</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s07.html#test_instruction"><code class="code">test</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s07s02.html"><code class="code">verify</code> instruction</a></span></dt><dt><span class="section"><a href="bk01pt02ch08s07s03.html"><code class="code">verify error</code> instruction</a></span></dt></dl></dd><dt><span class="section"><a href="bk01pt02ch08s08.html">Embedded Java source code</a></span></dt><dd><dl><dt><span class="section"><a href="bk01pt02ch08s08.html#java_instruction"><code class="code">java</code> instruction</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assignment_instructions"></a>Assignments</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="variable_declaration_instruction"></a>Variable declaration instruction</h3></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="variable_declaration_description"></a>Description</h4></div></div></div><p>The <em class="firstterm">variable declaration</em> instruction is used to declare local script variables that can be used in subsequent instructions of the script.</p><p>A local script variable, simply called a <em class="firstterm">variable</em>, is an identifier (symbolic name) used to reference an object of a specific type. One or more variables of the same type can be declared with a single variable declaration instruction.</p><p>A <em class="firstterm">variable identifier</em> is a prefixed identifier starting with <code class="code">v_</code> as prefix. For more information about prefixed identifiers see <a href="bk01pt02ch04s02s02.html" title="Prefixed identifier">the section called &#8220;Prefixed identifier&#8221;</a>. Each variable identifier within a script or set of instructions must be unique.</p><p>Besides simply declaring a variable, the variable can also optionally be initialized by specifying any valid expression. If no expression is specified then the variable is implicitly initialized with <code class="code">void</code>. After initialization, the value of a variable (i.e. the object assigned to a variable) can be changed with a subsequent <a href="bk01pt02ch08.html#assignment_instruction" title="Assignment instruction">assignment</a> instruction.</p><p>The <em class="firstterm">scope of a variable</em> (i.e. the locations in a script where the variable can be accessed) is limited to the script or set of instructions in which it is declared. For example, a variable <code class="code">foo</code> declared in script <code class="code">s1</code> cannot be accessed from another script <code class="code">s2</code>, but script <code class="code">s2</code> can very well declare its own distinct variable <code class="code">foo</code> which, in turn, cannot be accessed from <code class="code">s1</code>. The same is true for a set of instructions within a flow control instruction. For example, a variable <code class="code">foo</code> declared inside a <code class="code">repeat</code> loop cannot be accessed from outside of the <code class="code">repeat</code> loop.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Whenever possible, the <span class="emphasis"><em>constant</em></span> declaration instruction should be used instead of the <span class="emphasis"><em>variable</em></span> declaration instruction, because this eliminates the risk of accidentally assigning a new value to a variable which is meant to be a constant. See <a href="bk01pt02ch08.html#constant_declaration_instruction" title="Constant declaration instruction">the section called &#8220;Constant declaration instruction&#8221;</a>.</td></tr></table></div><p>See also <a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a> for information about dynamic typing and error handling.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="variable_declaration_syntax"></a>Syntax</h4></div></div></div><div class="table"><a name="variable_declaration_syntax_table"></a><p class="title"><b>Table 8.1. <code class="code">variable declaration</code> syntax</b></p><div class="table-contents"><table summary="variable declaration syntax" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">variable_declaration_instruction</code></td><td>
                <code class="code">"var" <a href="bk02ch03.html#EBNF_object_type_selector">object_type_selector</a> <a href="bk02ch03.html#EBNF_variable_id">variable_id</a> ( ";" <a href="bk02ch03.html#EBNF_variable_id">variable_id</a> ) * ( "=" <a href="bk02ch03.html#EBNF_expression">expression</a> <a href="bk02ch03.html#EBNF_assignment_tail">assignment_tail</a> ? ) ?</code>
              </td><td><a href="bk01pt02ch08.html#variable_declaration_instruction" title="Variable declaration instruction">the section called &#8220;Variable declaration instruction&#8221;</a></td></tr><tr><td><code class="code">assignment_tail</code></td><td>
                <code class="code"><a href="bk02ch03.html#EBNF_type_check_clause">type_check_clause</a> ? <a href="bk02ch03.html#EBNF_on_error_clause">on_error_clause</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></td></tr><tr><td><code class="code">type_check_clause</code></td><td>
                <code class="code">"type_check" ":" ( "yes" | "no" )</code>
                <p>"remark: default value is <code class="code">yes</code></p>
              </td><td> </td></tr><tr><td><code class="code">on_error_clause</code></td><td>
                <code class="code">"on_error" ":" ( "exit_script" | "continue" )</code>
                <p>"remark: default value is <code class="code">exit_script</code></p>
              </td><td> </td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="variable_declaration_example_section"></a>Examples</h4></div></div></div><div class="example"><a name="variable_declaration_examples"></a><p class="title"><b>Example 8.1. Variable declaration examples</b></p><div class="example-contents"><pre class="programlisting">service instruction_examples

   command variable_declaration_examples
      script
      
         // declare a variable and assign an initial value
         var string city = "Paris"
         
         // just declare a variable; it is implicitly initialized to void
         var zero_positive32 index
         
         // now assign a value
         index = 2 * 10
         
         // declare and initialize several variables
         var string first_name; last_name; address = ""
         
         // dynamic typing:
         var any_type dynamic_variable = v_city
         // var string city_2 = dynamic_variable                 // compiletime error (if uncommented)
         var string city_2 = dynamic_variable type_check:no      // no compiletime error and no runtime error
         var positive32 index_2 = dynamic_variable type_check:no // no compiletime error, but runtime error
         
         // catch runtime errors:
         index = 0
         var positive32 ratio_1 = 10 / index                     // runtime error (division by zero), and script exits immediately
         var positive32 ratio_2 = 10 / index on_error:continue   // runtime error, but script continues
         if v_program_error_ #r void then
            // appropriate error handling code
            // ...
         end if
         
         // a much much better approach:
         if index #v 0 then
            var positive32 ratio_3 = 10 / index
         else
            // appropriate error handling code
            // ...
         end if

      end script
   end command
   
end service</pre></div></div><br class="example-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="variable_declaration_see_also"></a>See also</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></li><li><a href="bk01pt02ch09.html" title="Chapter 9. Expressions and operators">Chapter 9, <i>Expressions and operators</i></a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#constant_declaration_instruction" title="Constant declaration instruction">the section called &#8220;Constant declaration instruction&#8221;</a></li><li><a href="bk01pt02ch08.html#assignment_instruction" title="Assignment instruction">the section called &#8220;Assignment instruction&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt03ch16.html" title="Chapter 16. Static typing">Chapter 16, <i>Static typing</i></a></li><li><a href="bk01pt03ch13.html" title="Chapter 13. Runtime error handling">Chapter 13, <i>Runtime error handling</i></a></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="constant_declaration_instruction"></a>Constant declaration instruction</h3></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="constant_declaration_description"></a>Description</h4></div></div></div><p>The <em class="firstterm">constant declaration</em> instruction is used to declare local script constants that can be used in subsequent instructions of the script.</p><p>A local script constant, simply called a <em class="firstterm">constant</em>, is an identifier (symbolic name) used to reference an object of a specific type.</p><p>A <em class="firstterm">constant identifier</em> is a prefixed identifier starting with <code class="code">c_</code> as prefix. For more information about prefixed identifiers see <a href="bk01pt02ch04s02s02.html" title="Prefixed identifier">the section called &#8220;Prefixed identifier&#8221;</a>. Each constant identifier within a script or set of instructions must be unique.</p><p>The value of the constant is defined by specifying any valid expression. No other value can be assigned afterwards in the script.</p><p>The <em class="firstterm">scope of a constant</em> (i.e. the locations in a script where the constant can be accessed) is limited to the script or set of instructions in which it is declared. For example, a constant <code class="code">foo</code> declared in script <code class="code">s1</code> cannot be accessed from another script <code class="code">s2</code>, but script <code class="code">s2</code> can very well declare its own distinct constant <code class="code">foo</code> which, in turn, cannot be accessed from <code class="code">s1</code>. The same is true for a set of instructions within a flow control instruction. For example, a constant <code class="code">foo</code> declared inside a <code class="code">repeat</code> loop cannot be accessed from outside of the <code class="code">repeat</code> loop.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">A local script <span class="emphasis"><em>constant</em></span> is similar to a local script <span class="emphasis"><em>variable</em></span>. The difference is that the value of a constant must be specified in the constant declaration instruction, and no other value can be assigned afterwards.</td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Whenever possible, the <span class="emphasis"><em>constant</em></span> declaration instruction should be used instead of the <span class="emphasis"><em>variable</em></span> declaration instruction, because this eliminates the risk of accidentally assigning a new value to a variable which is meant to be a constant.</td></tr></table></div><p>See also <a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a> for information about dynamic typing and error handling.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="constant_declaration_syntax"></a>Syntax</h4></div></div></div><div class="table"><a name="constant_declaration_syntax_table"></a><p class="title"><b>Table 8.2. <code class="code">constant declaration</code> syntax</b></p><div class="table-contents"><table summary="constant declaration syntax" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">constant_declaration_instruction</code></td><td>
                <code class="code">"const" <a href="bk02ch03.html#EBNF_object_type_selector">object_type_selector</a> <a href="bk02ch03.html#EBNF_constant_id">constant_id</a> "=" <a href="bk02ch03.html#EBNF_expression">expression</a> <a href="bk02ch03.html#EBNF_assignment_tail">assignment_tail</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#constant_declaration_instruction" title="Constant declaration instruction">the section called &#8220;Constant declaration instruction&#8221;</a></td></tr><tr><td><code class="code">assignment_tail</code></td><td>
                <code class="code"><a href="bk02ch03.html#EBNF_type_check_clause">type_check_clause</a> ? <a href="bk02ch03.html#EBNF_on_error_clause">on_error_clause</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></td></tr><tr><td><code class="code">type_check_clause</code></td><td>
                <code class="code">"type_check" ":" ( "yes" | "no" )</code>
                <p>"remark: default value is <code class="code">yes</code></p>
              </td><td> </td></tr><tr><td><code class="code">on_error_clause</code></td><td>
                <code class="code">"on_error" ":" ( "exit_script" | "continue" )</code>
                <p>"remark: default value is <code class="code">exit_script</code></p>
              </td><td> </td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="constant_declaration_example_section"></a>Examples</h4></div></div></div><div class="example"><a name="constant_declaration_examples"></a><p class="title"><b>Example 8.2. constant declaration examples</b></p><div class="example-contents"><pre class="programlisting">service instruction_examples

   command constant_declaration_examples
      script
      
         // declare a constant and assign an initial value
         const string capital = "Paris"
         
         // dynamic typing:
         const any_type dynamic_constant = capital
         // const string capital_2 = dynamic_constant              // compiletime error (if uncommented)
         const string capital_2 = dynamic_constant type_check:no   // no compiletime error and no runtime error
         const positive32 index_2 = dynamic_constant type_check:no // no compiletime error, but runtime error
         
         // catch runtime errors:
         const zero_positive32 index = 0
         const positive32 ratio_1 = 10 / index                     // runtime error (division by zero), and script exits immediately
         const positive32 ratio_2 = 10 / index on_error:continue   // runtime error, but script continues
         if v_program_error_ #r void then
            // appropriate error handling code
            // ...
         end if
         
         // a much much better approach:
         if index #v 0 then
            const positive32 ratio_3 = 10 / index
         else
            // appropriate error handling code
            // ...
         end if

      end script
   end command
   
end service</pre></div></div><br class="example-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="constant_declaration_see_also"></a>See also</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></li><li><a href="bk01pt02ch09.html" title="Chapter 9. Expressions and operators">Chapter 9, <i>Expressions and operators</i></a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#variable_declaration_instruction" title="Variable declaration instruction">the section called &#8220;Variable declaration instruction&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt03ch16.html" title="Chapter 16. Static typing">Chapter 16, <i>Static typing</i></a></li><li><a href="bk01pt03ch13.html" title="Chapter 13. Runtime error handling">Chapter 13, <i>Runtime error handling</i></a></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="assignment_instruction"></a>Assignment instruction</h3></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_description"></a>Description</h4></div></div></div><p>The <em class="firstterm">assignment instruction</em> is used to assign an object to an assignable object reference (i.e. to set or change the value of an assignable object reference).</p><p>An <em class="firstterm">assignable object reference</em> (also called assignment target) can be:</p><div class="itemizedlist"><ul type="disc"><li>a mutable attribute</li><li>a variable</li><li>a script output argument</li></ul></div><p>The object (i.e. the new value) assigned to the assignable object reference is specified through an expression whose type must be compatible to the type of the assignable object reference.</p><p>See <a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a> for information about dynamic typing and error handling.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_syntax"></a>Syntax</h4></div></div></div><div class="table"><a name="assignment_syntax_table"></a><p class="title"><b>Table 8.3. Assignment syntax</b></p><div class="table-contents"><table summary="Assignment syntax" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">assignment_instruction</code></td><td>
                <code class="code"><a href="bk02ch03.html#EBNF_assignable_object_reference_selector">assignable_object_reference_selector</a> "=" <a href="bk02ch03.html#EBNF_expression">expression</a> <a href="bk02ch03.html#EBNF_assignment_tail">assignment_tail</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#assignment_instruction" title="Assignment instruction">the section called &#8220;Assignment instruction&#8221;</a></td></tr><tr><td><code class="code">assignable_object_reference_selector</code></td><td><code class="code"><a href="bk02ch03.html#EBNF_assignable_object_reference">assignable_object_reference</a> ( "." <a href="bk02ch03.html#EBNF_attribute_id">attribute_id</a> ) *</code></td><td> </td></tr><tr><td><code class="code">assignable_object_reference</code></td><td>
                <div class="literallayout"><p><code class="code">-&gt; <a href="bk02ch03.html#EBNF_attribute_id">attribute_id</a><br>
-&gt; <a href="bk02ch03.html#EBNF_service_selector">service_selector</a> "." <a href="bk02ch03.html#EBNF_attribute_id">attribute_id</a><br>
-&gt; <a href="bk02ch03.html#EBNF_variable_id">variable_id</a><br>
-&gt; <a href="bk02ch03.html#EBNF_output_argument_id">output_argument_id</a></code></p></div>
              </td><td> </td></tr><tr><td><code class="code">assignment_tail</code></td><td>
                <code class="code"><a href="bk02ch03.html#EBNF_type_check_clause">type_check_clause</a> ? <a href="bk02ch03.html#EBNF_on_error_clause">on_error_clause</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></td></tr><tr><td><code class="code">type_check_clause</code></td><td>
                <code class="code">"type_check" ":" ( "yes" | "no" )</code>
                <p>"remark: default value is <code class="code">yes</code></p>
              </td><td> </td></tr><tr><td><code class="code">on_error_clause</code></td><td>
                <code class="code">"on_error" ":" ( "exit_script" | "continue" )</code>
                <p>"remark: default value is <code class="code">exit_script</code></p>
              </td><td> </td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_example_section"></a>Examples</h4></div></div></div><div class="example"><a name="assignment_examples"></a><p class="title"><b>Example 8.3. Assignment examples</b></p><div class="example-contents"><p>The following type will be used in the examples below:</p><pre class="programlisting">type customer_8 default_factory:yes
   attribute identifier type:positive32 end
   attribute name type:string end
   attribute city type:string kind:variable setable:all end
end type</pre><pre class="programlisting">service instruction_examples

   command assignment_examples

      out result1 type:string end
      out result2 type:positive32 end

      script
      
         // declare a variable and assign an initial value
         var string city = "Paris"
         // now change the value with an assignement instruction
         v_city = "London"
         
         // assign values to output arguments
         result1 = "city: " &amp; v_city
         result2 = 2 * 10
         
         // create customer
         var customer_8 customer = fa_customer_8.co_create ( &amp;
            identifier = 123 &amp;
            name = "Henry" &amp;
            city = "unknown" )
         // now change customer's city attribute
         v_customer.a_city = v_city
         // check
         check script v_customer.a_city =v "London"

         // dynamic typing:
         var any_type dynamic_variable = v_city
         // v_customer.a_city = dynamic_variable                 // compiletime error (if uncommented)
         v_customer.a_city = dynamic_variable type_check:no      // no compiletime error and no runtime error
         dynamic_variable = 123
         v_customer.a_city = dynamic_variable type_check:no      // no compiletime error, but runtime error
         
         // catch runtime errors:
         v_city = void
         o_result1 = v_city.to_upper_case                         // runtime error (void object), and script exits immediately
         o_result1 = v_city.to_upper_case on_error:continue       // runtime error, but script continues
         if v_program_error_ #r void then
            // appropriate error handling code
            // ...
         end if
         
         // a much much better approach:
         if v_city #r void then
            o_result1 = v_city.to_upper_case
         else
            // appropriate error handling code
            // ...
         end if

      end script
   end command
   
end service</pre></div></div><br class="example-break"><p>see also:</p><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#variable_declaration_examples" title="Example 8.1. Variable declaration examples">Example 8.1, &#8220;Variable declaration examples&#8221;</a></li><li><a href="bk01pt02ch08.html#constant_declaration_examples" title="Example 8.2. constant declaration examples">Example 8.2, &#8220;constant declaration examples&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_see_also"></a>See also</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></li><li><a href="bk01pt02ch09.html" title="Chapter 9. Expressions and operators">Chapter 9, <i>Expressions and operators</i></a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#constant_declaration_instruction" title="Constant declaration instruction">the section called &#8220;Constant declaration instruction&#8221;</a></li><li><a href="bk01pt02ch08.html#variable_declaration_instruction" title="Variable declaration instruction">the section called &#8220;Variable declaration instruction&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt03ch16.html" title="Chapter 16. Static typing">Chapter 16, <i>Static typing</i></a></li><li><a href="bk01pt03ch13.html" title="Chapter 13. Runtime error handling">Chapter 13, <i>Runtime error handling</i></a></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="assignment_tail"></a>Assignment tail</h3></div></div></div><p>The assignment tail can be appended to each one of the assignment instructions described in the previous sections. It is used for dynamic typing and special error handling.</p><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_tail_dynamic_typing"></a>Dynamic typing</h4></div></div></div><p>When an object (also called assignment source, or value) is assigned to an assignable object reference (also called assignment target), the compiler checks the compatibility of the source's type with the target's type. However, in some rare situations, dynamic typing is required. In such a case, the <code class="code">type_check:no</code> clause can be used to suppress type checking at compiletime. The type checking is then done at runtime, and a runtime error occurs if the types are not compatible. See also <a href="bk01pt03ch16.html" title="Chapter 16. Static typing">Chapter 16, <i>Static typing</i></a> for more information.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_tail_error_handling"></a>Error handling</h4></div></div></div><p>The <code class="code">on_error:continue</code> clause is used whenever a potential and anticipated runtime error during the evaluation of the new value should not terminate the execution of the script. In such a case the implicitly defined <code class="code">v_program_error_</code> variable can be used to detect runtime errors and take appropriate actions. See also <a href="bk01pt03ch13.html" title="Chapter 13. Runtime error handling">Chapter 13, <i>Runtime error handling</i></a> for more information.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_tail_syntax"></a>Syntax</h4></div></div></div><div class="table"><a name="assignment_tail_syntax_table"></a><p class="title"><b>Table 8.4. Assignment tail syntax</b></p><div class="table-contents"><table summary="Assignment tail syntax" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">assignment_tail</code></td><td>
                <code class="code"><a href="bk02ch03.html#EBNF_type_check_clause">type_check_clause</a> ? <a href="bk02ch03.html#EBNF_on_error_clause">on_error_clause</a> ?</code>
              </td><td><a href="bk01pt02ch08.html#assignment_tail" title="Assignment tail">the section called &#8220;Assignment tail&#8221;</a></td></tr><tr><td><code class="code">type_check_clause</code></td><td>
                <code class="code">"type_check" ":" ( "yes" | "no" )</code>
                <p>"remark: default value is <code class="code">yes</code></p>
              </td><td> </td></tr><tr><td><code class="code">on_error_clause</code></td><td>
                <code class="code">"on_error" ":" ( "exit_script" | "continue" )</code>
                <p>"remark: default value is <code class="code">exit_script</code></p>
              </td><td> </td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_tail_example_section"></a>Examples</h4></div></div></div><p>see:</p><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#variable_declaration_examples" title="Example 8.1. Variable declaration examples">Example 8.1, &#8220;Variable declaration examples&#8221;</a></li><li><a href="bk01pt02ch08.html#constant_declaration_examples" title="Example 8.2. constant declaration examples">Example 8.2, &#8220;constant declaration examples&#8221;</a></li><li><a href="bk01pt02ch08.html#assignment_examples" title="Example 8.3. Assignment examples">Example 8.3, &#8220;Assignment examples&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="assignment_tail_see_also"></a>See also</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt02ch08.html#assignment_instruction" title="Assignment instruction">the section called &#8220;Assignment instruction&#8221;</a></li><li><a href="bk01pt02ch08.html#constant_declaration_instruction" title="Constant declaration instruction">the section called &#8220;Constant declaration instruction&#8221;</a></li><li><a href="bk01pt02ch08.html#variable_declaration_instruction" title="Variable declaration instruction">the section called &#8220;Variable declaration instruction&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="bk01pt03ch16.html" title="Chapter 16. Static typing">Chapter 16, <i>Static typing</i></a></li><li><a href="bk01pt03ch13.html" title="Chapter 13. Runtime error handling">Chapter 13, <i>Runtime error handling</i></a></li></ul></div></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bk01pt02ch07s07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="bk01pt02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="bk01pt02ch08s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><code class="code">test</code> script </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Script execution</td></tr></table></div></body></html>
