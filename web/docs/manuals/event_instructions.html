<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Events</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="script_instructions.html" title="Chapter 8. Script instructions"><link rel="prev" href="next_repeat_instruction.html" title="next repeat instruction"><link rel="next" href="on_event_instruction.html" title="on event instruction"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Events</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="next_repeat_instruction.html">Prev</a> </td><th width="60%" align="center">Chapter 8. Script instructions</th><td width="20%" align="right"> <a accesskey="n" href="on_event_instruction.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="event_instructions"></a>Events</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="generate_event_instruction"></a><code class="code">generate event</code> instruction</h3></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="generate_event_description"></a>Description</h4></div></div></div><p>The <code class="code">generate event</code> instruction is used to generate an event in an event source, which can be an object or service.</p><p>An event can only be generated if it has been declared in the event source. If the event source is an object, then the event must be declared in the type and generated in the factory. If the event source is a service, then the event is declared and generated in the service.</p><p>The type of a generated event is always a child type of:</p><div class="itemizedlist"><ul type="disc"><li><code class="code">li_obix.li_events.ty_object_event</code> if the event source is an object</li><li><code class="code">li_obix.li_events.ty_service_event</code> if the event source is a service.</li></ul></div><p>For more information about Obix's event mechanism, please refer to <a href="event.html" title="Event">the section called &#8220;Event&#8221;</a>.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="generate_event_syntax"></a>Syntax</h4></div></div></div><div class="table"><a name="generate_event_syntax_table"></a><p class="title"><b>Table 8.20. <code class="code">generate event</code> syntax</b></p><div class="table-contents"><table summary="generate event syntax" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">generate_event_instruction</code></td><td><code class="code">"generate" "event" <a href="Obix_EBNF.html#EBNF_event_id">event_id</a> "from" <a href="Obix_EBNF.html#EBNF_expression">expression</a></code></td><td><a href="event_instructions.html#generate_event_instruction" title="generate event instruction">the section called &#8220;<code class="code">generate event</code> instruction&#8221;</a></td></tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul type="disc"><li><p><code class="code">event_id</code> specifies which event is to be generated. It must match with an <code class="code">event identifier</code> declared in the event source.</p></li><li><p><code class="code">expression</code> specifies the generated event (also called event object or event data). Its type must be compatible to the type declared in the event source. For example, type <code class="code">button</code> in a GUI framework declares it generates event <code class="code">mouse_clicked</code> of type <code class="code">mouse_clicked_event</code>. Then factory <code class="code">button</code> can generate a <code class="code">mouse_clicked</code> event through any expression of type <code class="code">mouse_clicked_event</code>.</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="generate_event_example_section"></a>Examples</h4></div></div></div><div class="example"><a name="generate_event_example_1"></a><p class="title"><b>Example 8.23. Simple <code class="code">generate event</code> example</b></p><div class="example-contents"><p>Suppose type <code class="code">tea_machine</code> generates event <code class="code">tea_ready</code> each time command <code class="code">make_tea</code> has finished its job:</p><pre class="programlisting">type tea_machine

   command make_tea end
   
   event tea_ready type:tea_ready_event end

end</pre><p>Type <code class="code">tea_ready_event</code> can simply be defined as:</p><pre class="programlisting">type tea_ready_event default_factory:yes

   inherit object_event end

end</pre><p>And factory <code class="code">tea_machine</code> can be implemented as:</p><pre class="programlisting">factory tea_machine type:tea_machine

   command make_tea
      script
         // some instructions to make tea
         // ...
         generate event tea_ready from fa_tea_ready_event.co_create ( source = this )
      end
   end
   
   creator create kind:in_all end

end</pre></div></div><br class="example-break"><p>See <a href="on_event_instruction.html#on_event_example_1" title="Example 8.24. Simple on event example">Example 8.24, &#8220;Simple <code class="code">on event</code> example&#8221;</a> for an example of how to register an event listener to a <code class="code">tea_machine</code> object.</p><p>For a more complete example, see also: <a href="event.html#product_stack_events_example" title="Example 6.10. Events in a television delivery stack">Example 6.10, &#8220;Events in a television delivery stack&#8221;</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="generate_event_see_also"></a>See also</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="on_event_instruction.html" title="on event instruction">the section called &#8220;<code class="code">on event</code> instruction&#8221;</a></li><li><a href="stop_event_handler_instruction.html" title="stop event handler instruction">the section called &#8220;<code class="code">stop event handler</code> instruction&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="event.html" title="Event">the section called &#8220;Event&#8221;</a></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="next_repeat_instruction.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="script_instructions.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="on_event_instruction.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><code class="code">next repeat</code> instruction </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <code class="code">on event</code> instruction</td></tr></table></div></body></html>
