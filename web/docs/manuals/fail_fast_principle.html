<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The Fail fast! principle: Debug less and produce more reliable software</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="obix_articles.html" title="Obix articles"><link rel="prev" href="obix_articles.html" title="Obix articles"><link rel="next" href="why_obix.html" title="Why Obix? Reliable code and software developer productivity"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">The <span class="emphasis"><em>Fail fast!</em></span> principle: Debug less and produce more reliable software</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="obix_articles.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><th width="60%" align="center">Obix articles</th><td width="20%" align="right"> <a accesskey="n" href="why_obix.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr></table><hr></div><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="fail_fast_principle"></a>The <span class="emphasis"><em>Fail fast!</em></span> principle: Debug less and produce more reliable software</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Christian</span> <span class="surname">Neumanns</span></h3></div></div><div><p class="pubdate">November 2012</p></div></div><hr></div><p>Whenever an error occurs in a running application there are two diametrically opposed error-handling approaches:</p><div class="orderedlist"><ol type="1"><li><p>The <span class="bold"><strong>Forgive!</strong></span> approach: the application continues the execution and tries to do its best to circumvent the error</p></li><li><p>The <span class="bold"><strong>Fail fast!</strong></span> approach: the application stops immediately and reports an error</p></li></ol></div><p>Which approach is better?</p><p>Which one should you apply in your application?</p><p>To find the answer, let&#8217;s look at a simple example.</p><p>Suppose we have to write a (rudimentary) web application that displays a warning message near a fountain to warn people that the water is polluted.</p><p>The following HTML code does the job:</p><pre class="programlisting">&lt;html&gt;
   &lt;body&gt;
      &lt;h2 style="color:red;"&gt;Important!&lt;/h2&gt;
      &lt;p&gt;Please &lt;b&gt;DO NOT&lt;/b&gt; drink this water!&lt;/p&gt;
   &lt;/body&gt;
&lt;/html&gt;</pre><p>The result displayed in the browser looks like this:</p><div class="informalfigure"><a name="fail_fast_ok"></a><div class="mediaobject"><img src="fail_fast_ok.PNG"></div></div><p>Now let us insert a small error into the HTML code. Instead of <code class="code">&lt;/b&gt;</code> we write <code class="code">&lt;b&gt;</code> after <code class="code">DO NOT</code>, as shown below:</p><pre class="programlisting">&lt;p&gt;Please &lt;b&gt;DO NOT&lt;b&gt; drink this water!&lt;/p&gt;</pre><p>Two interesting questions arise:</p><div class="itemizedlist"><ul type="disc"><li><p>What <span class="emphasis"><em>should</em></span> happen?</p></li><li><p>What <span class="emphasis"><em>will</em></span> happen?</p></li></ul></div><p>The second question is easy to answer. We just have to feed our browser with the buggy HTML code. This is the result - as displayed in Firefox, Google Chrome, Internet Explorer, Opera and Safari at the time of writing:</p><div class="informalfigure"><a name="fail_fast_no_panic"></a><div class="mediaobject"><img src="fail_fast_no_panic.PNG"></div></div><p>Obviously, the <span class="emphasis"><em>Forgive!</em></span> approach has been applied by the browsers because the application continued and did not report an error. The only difference to note is that more text is now displayed in bold. But the message as a whole is still displayed correctly and people are warned. Nothing to worry too much!</p><p>We can conclude: The <span class="emphasis"><em>Forgive!</em></span> approach is <span class="emphasis"><em>good</em></span>.</p><p>Let&#8217;s try another bug. Instead of <code class="code">&lt;b&gt;</code> we write <code class="code">&lt;b</code>  before <code class="code">DO NOT</code>, as shown below:</p><pre class="programlisting">&lt;p&gt;Please &lt;b DO NOT&lt;/b&gt; drink this water!&lt;/p&gt;</pre><p>This is the result - again as displayed in the browsers mentioned before:</p><div class="informalfigure"><a name="fail_fast_panic"></a><div class="mediaobject"><img src="fail_fast_panic.PNG"></div></div><p>Panic! Now the program does exactly the opposite of what it is supposed to do. The consequences are terrible. Our life-saving application has mutated into a killer-application (but not the kind of <a href="http://en.wikipedia.org/wiki/Killer_application" target="_top">killer-application</a> we all dream of writing some day).</p><p>We can conclude: The <span class="emphasis"><em>Forgive!</em></span> approach is <span class="emphasis"><em>not good</em></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">It is important to be aware of the fact that the above example is not just a theoretical, exaggerated example. There are numerous real-life examples of &#8216;little bugs&#8217; with catastrophic consequences, such as the <a href="http://www.wired.com/thisdayintech/2009/07/dayintech_0722/" target="_top">Mariner 1</a> spacecraft that exploded shortly after lift-off due to a &#8216;missing hyphen&#8217;. For more examples, see: <a href="http://en.wikipedia.org/wiki/List_of_software_bugs" target="_top">List of software bugs</a>.</td></tr></table></div><p>As we can see from the above example, the consequences of applying the <span class="emphasis"><em>Forgive!</em></span> approach vary largely and can range from completely harmless to extremely harmful. So, what <span class="emphasis"><em>is</em></span> the correct answer to the important question <span class="emphasis"><em>"What should happen?"</em></span></p><p>As is so often the case, it depends on the situation. There are, however, some general rules to apply.</p><p>The first rule is:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>During development you should always apply the <span class="emphasis"><em>Fail fast!</em></span> approach.</strong></span></p></li></ul></div><p>The rationale behind this rule is twofold and easy to understand:</p><div class="itemizedlist"><ul type="disc"><li><p>The <span class="emphasis"><em>Fail fast!</em></span> approach helps in debugging. As soon as something goes wrong, the application stops and the error message helps to detect, diagnose and correct the error. Therefore the <span class="emphasis"><em>Fail fast!</em></span> approach helps to write more reliable software. As a result, this considerably reduces development and maintenance costs and prevents frustrations and catastrophes that would otherwise risk appearing in production mode.</p></li><li><p>The consequences of bugs appearing during <span class="emphasis"><em>development mode</em></span> are not harmful. The customer doesn&#8217;t complain, money doesn&#8217;t go to the wrong account, and rockets don&#8217;t explode.</p></li></ul></div><p>In contrast, however, the situation changes radically when the application runs under <span class="emphasis"><em>production mode</em></span>. Unfortunately, there is no <span class="emphasis"><em>one-size-fits-all</em></span> rule. Practice shows that it is generally better to also apply the <span class="emphasis"><em>Fail fast!</em></span> approach by default. The final damage resulting from an application that ignores an error and just continues arbitrarily is generally worse than the damage provoked by an application that stops suddenly (see also <a href="http://en.wikipedia.org/wiki/Murphy%27s_law" target="_top">Murphy&#8217;s law</a>). If an accounting application suddenly stops, the user is <span class="emphasis"><em>angry</em></span>. If it continues and produces wrong results, the user is <span class="emphasis"><em>very angry</em></span>. <span class="emphasis"><em>&#8216;Angry&#8217;</em></span> is better than <span class="emphasis"><em>&#8216;very angry&#8217;</em></span>. Therefore, in this case the <span class="emphasis"><em>Fail fast!</em></span> approach is better.</p><p>There are exceptions, however, and different situations must be studied carefully. This is especially true if the <span class="emphasis"><em>greatest possible damage</em></span> requires us to examine each case thoroughly, such as in medical applications, money transfer applications or space invader applications. For example, applying the <span class="emphasis"><em>Fail fast!</em></span> rule is obviously the right approach as long as a rocket to Mars didn&#8217;t take off. But as soon as the rocket has started, stopping the application is no longer an option. Now the <span class="emphasis"><em>Forgive!</em></span> approach must be applied and combined with <span class="emphasis"><em>&#8216;do the best you can do&#8217;</em></span> behavior.</p><p>A good option is sometimes to fail fast, but minimize the damage. For example, if a run-time-error occurs in a text editor application, the application should first automatically save the current text in a temporary file, then display a meaningful message to the user ("Sorry, ... but your data is saved in file abc.tmp"), optionally send an error report to the developers, and then stop.</p><p>We can conclude:</p><div class="itemizedlist"><ul type="disc"><li><p>In <span class="emphasis"><em>development mode</em></span> you should always apply the <span class="emphasis"><em>Fail fast!</em></span> approach.</p></li><li><p>In <span class="emphasis"><em>production mode</em></span>:</p><div class="itemizedlist"><ul type="circle"><li><p>You should generally favor the <span class="emphasis"><em>Fail fast!</em></span> approach by default.</p></li><li><p>Critical applications that risk creating high damages in case of a malfunction need customized, context-specific and damage-eliminating (or at least damage-reducing) behavior. <span class="emphasis"><em>Forgive and react appropriately!</em></span> approaches must be applied in well-defined cases.</p></li></ul></div></li></ul></div><p>The same idea is expressed by the <a href="http://www.faqs.org/docs/artu/ch01s06.html#id2878538" target="_top">Rule of Repair</a> in <a href="http://www.faqs.org/docs/artu/index.html" target="_top">The Art of Unix Programming</a>, written by Eric Steven Raymond: <span class="emphasis"><em>Repair what you can - but when you must fail, fail noisily and as soon as possible.</em></span></p><p>In this context it is also good to remember the eloquently written command number 6 of <a href="http://www.lysator.liu.se/c/ten-commandments.html" target="_top">The 10 commandments for C programmers</a>, written in old English by Harry Spencer:</p><div class="itemizedlist"><ul type="disc"><li><p>"If a function be advertised to return an error code in the event of difficulties, thou shalt check for that code, yea, even though the checks triple the size of thy code and produce aches in thy typing fingers, for if thou thinkest 'it cannot happen to me', the gods shall surely punish thee for thy arrogance."</p></li></ul></div><p>In any case, your best friend is always a development environment that supports the <span class="emphasis"><em>Fail fast!</em></span> principle. For example, a compiled language supports the <span class="emphasis"><em>Fail fast!</em></span> rule because compilers can immediately report a whole plethora of bugs. Here is an example of a stupid bug that easily escapes the human eye and can lead to 'unwanted surprises', but which is caught immediately and with 100% certainty by the compiler:</p><pre class="programlisting">var table_row_index = 1
...
table_row_indx = table_row_index + 1</pre><p><span class="emphasis"><em><a href="design_by_contract_contract_programming.html" title="Chapter 4. Contract Programming, also called Design by Contract (TM)">Design by contract (TM)</a></em></span> (also called <span class="emphasis"><em>Contract Programming</em></span>) is another example of a <span class="emphasis"><em>Fail fast!</em></span> feature. This is because invalid values for input/output arguments and object attributes are immediately detected and raise a program error at runtime.</p><p>There are many <a href="reliability_features.html" title="Obix's 24 Fail fast! concepts for more reliable software">more</a> <span class="emphasis"><em>Fail fast!</em></span> features that can be built into a programming language. They all rely on the following rule:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Errors should preferably be automatically detected at compile-time, or else as early as possible at run-time.</strong></span></p></li></ul></div><p>If you choose a programming environment ( = programming language + libraries + frameworks) that supports this important rule you will debug less and produce more reliable code in less time.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="obix_articles.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><td width="20%" align="center"><a accesskey="u" href="obix_articles.html"><img src="images/up.png" alt="Go up one level" title="Go up one level"></a></td><td width="40%" align="right"> <a accesskey="n" href="why_obix.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr><tr><td width="40%" align="left" valign="top">Obix articles </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Table of contents" title="Table of contents"></a></td><td width="40%" align="right" valign="top"> Why Obix? Reliable code and software developer productivity</td></tr></table></div></body></html>
