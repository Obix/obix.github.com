<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Embedded web services</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="introduction_PAIOF_framework.html" title="Chapter 4. Interacting with applications (PAIOF framework)"><link rel="prev" href="t3_lists_of_commands.html" title="Executing lists of commands"><link rel="next" href="t3_customizing_PAIOF.html" title="Customizing PAIOF"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Embedded web services</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="t3_lists_of_commands.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><th width="60%" align="center">Chapter 4. Interacting with applications (PAIOF framework)</th><td width="20%" align="right"> <a accesskey="n" href="t3_customizing_PAIOF.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="t3_web_services"></a>Embedded web services</h2></div></div></div><p>In many cases the most appreciated feature of PAIOF is its embedded web server. This component provides a graphical web interface for programmers, testers and users and a HTTP service for other applications which can execute PAIOF commands. No programming or configuration is required to run the web server. However customization is possible if needed.</p><br><p>Starting the web server is easy. You just have to launch PAIOF's <code class="code">@start_web_server</code> command, or its shortcut <code class="code">@sws</code>. Proceed as follows:</p><div class="itemizedlist"><ul type="disc"><li><p>Open a command prompt window in your project's directory (<code class="code">projects/random_arcs/</code>) and type:</p><pre class="programlisting">run @sws</pre><p>A message similar to the following one will be displayed:</p><pre class="screen">Web server started on port 80. Type ^C to stop
Please use the following URL to start:
http://127.0.0.1/</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you need to run the web server on a different port, you have to specify a value for parameter <code class="code">@port</code>, for example:</p><pre class="programlisting">run @sws @port:8080</pre></td></tr></table></div></li><li><p>Open your web browser and enter the URL in your browser's address field.</p></li><li><p>This URL provides a user interface that allows you to select an application command, enter input data, execute the command, and see the command's output displayed in the web browser.</p><p>Here is an example of the screen after executing command <code class="code">add_contribution</code>:</p><div class="figure"><a name="PAIOF_GUI_example"></a><p class="title"><b>Figure 4.4. PAIOF web interface example</b></p><div class="figure-contents"><div class="mediaobject"><img src="PAIOF_GUI_example.png" alt="PAIOF web interface example"></div></div></div><br class="figure-break"></li></ul></div><br><p>You can also execute a single command by specifying the command name and the parameters in the URL. This could be used by other applications to execute commands via HTTP requests. To demonstrate this do the following:</p><div class="itemizedlist"><ul type="disc"><li><p>Enter the following URL in your browser's address bar (adapt the port number if necessary):</p><pre class="programlisting">http://127.0.0.1:8080/add_contribution?first_name=foo&amp;last_name=bar&amp;random_number=11&amp;@f=json&amp;@c=obj</pre><p>As you can see, the command name (<code class="code">add_contribution</code>) is provided in the URL path.</p><p>The first part of the URL query is used to provide the input parameters for command <code class="code">add_contribution</code>.</p><p>There are also 2 meta parameters. <code class="code">@f=json</code> tells PAIOF to return the result in JSON format, and <code class="code">@c=obj</code> specifies the content level - in this case we want the complete object data (<code class="code">obj</code>).</p></li><li><p>The result returned from the PAIOF server looks as follows:</p><pre class="screen">{"Result":{"identifier":474,"first_name":"foo","last_name":"bar","random_number":11,"date_time":"2012-06-20 09:23:01"}}</pre></li></ul></div><br><p>For maximum flexibility you can use and combine all the parameters described in the previous sections whenever sending a HTTP request. For example you could send the following URL to do something atypical (if there are no security issues): read the command's input parameters from file <code class="code">tests/params.txt</code> on the server, then ask confirmation for each parameter in the server's operating system console and finally write the result in XML format into file <code class="code">tests/result.xml</code> on the server (adapt the port number if necessary):</p><pre class="programlisting">http://127.0.0.1:8080/add_contribution?@input=[file%20tests/params.txt,console_all]&amp;@d=create_or_replace_file%20tests/result.xml&amp;@f=xmld&amp;@c=obj</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="t3_lists_of_commands.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><td width="20%" align="center"><a accesskey="u" href="introduction_PAIOF_framework.html"><img src="images/up.png" alt="Go up one level" title="Go up one level"></a></td><td width="40%" align="right"> <a accesskey="n" href="t3_customizing_PAIOF.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr><tr><td width="40%" align="left" valign="top">Executing lists of commands </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Table of contents" title="Table of contents"></a></td><td width="40%" align="right" valign="top"> Customizing PAIOF</td></tr></table></div></body></html>
