<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 6. RSE features</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="language_basics.html" title="Part II. Language basics"><link rel="prev" href="service.html" title="Service"><link rel="next" href="command.html" title="Command"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 6. RSE features</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="service.html">Prev</a> </td><th width="60%" align="center">Part II. Language basics</th><td width="20%" align="right"> <a accesskey="n" href="command.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="RSE_features"></a>Chapter 6. RSE features</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="RSE_features.html#attribute">Attribute</a></span></dt><dt><span class="section"><a href="command.html">Command</a></span></dt><dt><span class="section"><a href="creator.html">Creator</a></span></dt><dt><span class="section"><a href="event.html">Event</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="attribute"></a>Attribute</h2></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_description"></a>Description</h3></div></div></div><p>An <em class="firstterm">attribute</em> is a reference to an object of a defined type and belongs to an object or a service.</p><p>For example, a <code class="code">customer</code> object could have attribute <code class="code">identifier</code> of type <code class="code">positive32</code>, and attribute <code class="code">name</code> of type <code class="code">string</code>. Or, service <code class="code">XML_utilities</code> could have attribute <code class="code">tag_open</code> of type <code class="code">string</code>.</p><p>Each attribute is accessed through its identifier which must be unique within the object or service.</p><p>In case of an attribute belonging to an object, the <span class="emphasis"><em>interface</em></span> to the attribute (i.e. the way how the attribute can be accessed and used) is defined in the object's <span class="emphasis"><em>type</em></span>, and the <span class="emphasis"><em>implementation</em></span> of the attribute is defined in the <span class="emphasis"><em>factory</em></span> that implements the object's type. Hence, in our above example of attribute <code class="code">name</code> in a <code class="code">customer</code> object, the attribute's interface is defined in <code class="code">type customer</code>, and the implementation is defined in <code class="code">factory customer</code>.</p><p>In case of an attribute belonging to a service, the attribute's interface and implementation are both defined in the service.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_syntax"></a>Syntax</h3></div></div></div><div class="table"><a name="attribute_syntax_table"></a><p class="title"><b>Table 6.1. Attribute</b></p><div class="table-contents"><table summary="Attribute" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">attribute</code></td><td><div class="literallayout"><p><code class="code">"attribute" ( "id" ":" ) ? <a href="Obix_EBNF.html#EBNF_attribute_id">attribute_id</a> <a href="Obix_EBNF.html#EBNF_attribute_properties">attribute_properties</a><br>
   <a href="Obix_EBNF.html#EBNF_check_script">check_script</a> ?<br>
   <a href="Obix_EBNF.html#EBNF_default_script">default_script</a> ?<br>
   <a href="Obix_EBNF.html#EBNF_get_script">get_script</a> ?<br>
   <a href="Obix_EBNF.html#EBNF_set_script">set_script</a> ?<br>
"end" "attribute" ?</code></p></div></td><td><a href="RSE_features.html#attribute" title="Attribute">the section called &#8220;Attribute&#8221;</a></td></tr></tbody></table></div></div><br class="table-break"><p>As we can see from the above syntax, an attribute has a number of properties. Their usage depends on whether the attribute is defined in a type, a factory or a service. The following table shows a summary of all properties.</p><div class="table"><a name="attribute_properties_table"></a><p class="title"><b>Table 6.2. Attribute properties</b></p><div class="table-contents"><table summary="Attribute properties" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col><col><col><col><col></colgroup><thead><tr><th>Property</th><th>Value</th><th>Required</th><th>Default value</th><th>Defined in types</th><th>Defined in factories</th><th>Defined in services</th></tr></thead><tbody><tr><td><a href="RSE_features.html#attribute_id_property" title="Property id"><code class="code">id</code></a></td><td>a prefixed identifier</td><td>yes</td><td> </td><td>yes</td><td>yes</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_type_property" title="Attribute property type"><code class="code">type</code></a></td><td>any existing type</td><td>yes</td><td> </td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_voidable_property" title="Attribute property voidable"><code class="code">voidable</code></a></td><td><code class="code">yes</code> or <code class="code">no</code></td><td>no</td><td><code class="code">no</code></td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_check_property" title="Attribute property check"><code class="code">check</code></a></td><td>an expression or a script</td><td>no</td><td><code class="code">void</code></td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_default_property" title="Attribute property default"><code class="code">default</code></a></td><td>an expression or a script</td><td>no</td><td><code class="code">void</code></td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_private_property" title="Attribute property private"><code class="code">private</code></a></td><td><code class="code">yes</code> or <code class="code">no</code></td><td>no</td><td><code class="code">no</code></td><td>no</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_kind_property" title="Attribute property kind"><code class="code">kind</code></a></td><td>one of the following:<pre class="literallayout">variable
  constant
  readonly_variable
  readonly_constant</pre></td><td>no</td><td><code class="code">constant</code></td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_setable_property" title="Attribute property setable"><code class="code">setable</code></a></td><td>one of the following:<pre class="literallayout">all
  factory
  service
  creator
  none</pre></td><td>no</td><td>(2)</td><td>yes</td><td>(1)</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_get_property" title="Attribute property get"><code class="code">get</code></a></td><td>script used to get the attribute's value</td><td>yes if property kind is <code class="code">readonly_variable</code> or <code class="code">readonly_constant</code></td><td>script that returns the attribute's value</td><td>no</td><td>yes</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_set_property" title="Attribute property set"><code class="code">set</code></a></td><td>script used to set the attribute's value</td><td>yes if property <code class="code">kind</code> is <code class="code">variable</code></td><td>script that sets the attribute's value</td><td>no</td><td>yes</td><td>yes</td></tr><tr><td><a href="RSE_features.html#attribute_obsolete_property" title="Attribute property obsolete"><code class="code">obsolete</code></a></td><td><code class="code">yes</code> or <code class="code">no</code></td><td>no</td><td><code class="code">no</code></td><td>yes</td><td>no</td><td>yes if not private attribute</td></tr></tbody></table></div></div><br class="table-break"><p>(1): yes if attribute is private, no if attribute is not private</p><p>(2): default value for property setable is defined as follows:</p><div class="table"><a name="setable_default_value"></a><p class="title"><b>Table 6.3. default value for property <code class="code">setable</code></b></p><div class="table-contents"><table summary="default value for property setable" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col></colgroup><thead><tr><th>if ...</th><th>then default value is</th></tr></thead><tbody><tr><td>property <code class="code">kind</code> is set to <code class="code">constant</code></td><td><code class="code">creator</code></td></tr><tr><td>property <code class="code">kind</code> is set to <code class="code">variable</code> and attribute is used in service</td><td><code class="code">service</code></td></tr><tr><td>property <code class="code">kind</code> is set to <code class="code">variable</code> and attribute is used in type or factory</td><td><code class="code">factory</code></td></tr><tr><td>property <code class="code">kind</code> is set to <code class="code">readonly_variable</code> or <code class="code">readonly_constant</code></td><td><code class="code">none</code></td></tr></tbody></table></div></div><br class="table-break"><p>All properties will now be explained.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_id_property"></a>Property <code class="code">id</code></h3></div></div></div><p>The value of property <code class="code">id</code> is an attribute identifier used to reference the attribute. Each <code class="code">id</code> must be unique within an object or service. An attribute identifier is a prefixed identifier starting with <code class="code">a_</code> as prefix. For more information about prefixed identifiers see <a href="prefixed_identifier.html" title="Prefixed identifier">the section called &#8220;Prefixed identifier&#8221;</a>.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_type_property"></a>Attribute property <code class="code">type</code></h3></div></div></div><p>The value of property <code class="code">type</code> defines the attribute's type, i.e. the type of the object referenced by the attribute.</p><p>example:</p><div class="informalexample"><pre class="programlisting">type product_2

   attribute identifier type:positive32 end
   attribute name type:string end
   attribute price_in_cents type:positive32 end
   
end</pre></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_voidable_property"></a>Attribute property <code class="code">voidable</code></h3></div></div></div><p>The value of property <code class="code">voidable</code> defines whether the value <code class="code">void</code> is allowed for the attribute. By default, <code class="code">void</code> is not allowed, which means that a runtime error will immediately occur whenever an attempt is made to set the attribute's value to <code class="code">void</code>.</p><p>example:</p><div class="informalexample"><pre class="programlisting">type product_3 default_factory:yes

   attribute identifier type:positive32 end
   attribute name type:string end
   attribute price_in_cents type:positive32 voidable:yes end
   
end</pre></div><p>In the above example, the value of attribute <code class="code">price_in_cents</code> can be <code class="code">void</code> at runtime (<code class="code">voidable:yes</code>), but all other attributes cannot be <code class="code">void</code></p><p>See also: <a href="void_values.html" title="Chapter 12. Void values">Chapter 12, <i>Void values</i></a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_check_property"></a>Attribute property <code class="code">check</code></h3></div></div></div><p>Property <code class="code">check</code> is used to define which values are allowed for the attribute. Each attempt to set the attribute to an invalid value at runtime (i.e. a value that doesn't pass the check) will immediately result in a runtime error.</p><p>There are two ways to define this property:</p><div class="orderedlist"><ol type="1"><li><p>by an expression that must evaluate to <code class="code">yes</code> for any valid value (used in simple cases)</p><p>example:</p><div class="informalexample"><pre class="programlisting">type customer_2 default_factory:yes
   attribute identifier type:positive32 check: i_identifier &gt;= 10000 and i_identifier &lt; 100000 end
   attribute name type:string check: i_name.item_count &gt;= 3 end
end type</pre></div><p>In the above example <code class="code">identifier</code> must be a value between <code class="code">10000</code> and <code class="code">99999</code>, and <code class="code">name</code> must contain at least 3 characters. Hence, writing:</p><pre class="programlisting">var customer_2 garfield = fa_customer_2.co_create ( &amp;
   identifier = 123 &amp;
   name = "Garfield" )</pre><p>will immediately generate a runtime error because <code class="code">123</code> is an invalid value for <code class="code">identifier</code>.</p></li><li><p>by a script that evaluates if the value is valid (used in more complex cases)</p><p>example:</p><div class="informalexample"><pre class="programlisting">type customer_3

   attribute identifier type:positive32
      check
         script
            var positive32 min; max
            // retrieve minimum and maximum values from database:
            //   connect to database
            //   min = ...
            //   max = ...
            //   disconnect from database
            check i_identifier &gt;= min and i_identifier &lt;= max
         end script
      end check
   end attribute
      
   attribute name type:string check: i_name.item_count &gt;= 5 end

end type</pre></div></li></ol></div><p>In both cases it is also possible to optionally specify:</p><div class="itemizedlist"><ul type="disc"><li><p>a specific <code class="code">error_message</code> to display to the user (overrides the default error message; can be used by UI frameworks).</p></li><li><p>a specific <code class="code">error_id</code> used to programmatically identify the error, e.g. for logging purposes and statistics.</p></li><li><p>a specific <code class="code">error_data</code> object that holds any useful information which can programmatically be explored. By default, <code class="code">error_data</code> simply contains the value to be checked.</p></li></ul></div><p>example:</p><div class="informalexample"><pre class="programlisting">type customer_4

   attribute identifier type:positive32
      check
         script
            var positive32 min; max
            // retrieve minimum and maximum values from database:
            // ...
            check i_identifier &gt;= min and i_identifier &lt;= max &amp;
               error_message: "Identifier must contain a value between " &amp; v_min.to_string &amp; " and " &amp; v_max.to_string &amp; "!" &amp;
               error_id: invalid_identifier &amp;
               error_data: fa_resource_positive32_min_max_error.co_create ( &amp;
				  resource = void &amp;
                  data = i_identifier &amp;
                  min = v_min &amp;
                  max = v_max )
         end script
      end check
   end attribute
      
   attribute name type:string &amp;
      check: i_name.item_count &gt;= 5 &amp;
         error_message: "The name must contain at least 3 characters!" &amp;
         error_id: invalid_name
   end attribute

end type</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Checks are one of the most important features for writing more reliable code in Obix. See <a href="design_by_contract_contract_programming.html" title="Chapter 17. Contract Programming, also called Design by Contract (TM)">Chapter 17, <i>Contract Programming, also called Design by Contract (TM)</i></a> for more information.</td></tr></table></div><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="attribute_check_script.html" title="Attribute check script">the section called &#8220;Attribute <code class="code">check</code> script&#8221;</a></li><li><a href="error_handling_instructions.html#check_instruction" title="check instruction">the section called &#8220;<code class="code">check</code> instruction&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_list_check_property"></a>Property <code class="code">attribute_check</code></h3></div></div></div><p>Sometimes the validity of one attribute value depends on the values of one or more other attributes, that is to say there is a mutual dependency of the validity of several attributes. In such a case we have to use property <code class="code">attribute_check</code>.</p><p>Because <code class="code">attribute_check</code> concerns several attributes, this property doesn't belong to a single attribute, such as the <code class="code">check</code> property in the previous section, but it belongs to the type or service in which the attributes are defined.</p><p>The syntax of <code class="code">attribute_check</code> is defined as follows:</p><div class="table"><a name="attribute_list_check_syntax"></a><p class="title"><b>Table 6.4. <code class="code">attribute_check</code></b></p><div class="table-contents"><table summary="attribute_check" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Production</th><th>Syntax</th><th>Links</th></tr></thead><tbody><tr><td><code class="code">attribute_list_check</code></td><td><div class="literallayout"><p><code class="code">-&gt; "attribute_check" <a href="Obix_EBNF.html#EBNF_check_property">check_property</a> "end"<br>
<br>
-&gt; "attribute_check"<br>
      <a href="Obix_EBNF.html#EBNF_script">script</a><br>
   "end" "attribute_check" ?</code></p></div></td><td><a href="RSE_features.html#attribute_list_check_property" title="Property attribute_check">the section called &#8220;Property <code class="code">attribute_check</code>&#8221;</a></td></tr></tbody></table></div></div><br class="table-break"><p>There are two ways to define this property:</p><div class="orderedlist"><ol type="1"><li><p>by an expression that must evaluate to <code class="code">yes</code> (used in simple cases)</p></li><li><p>by a script that contains any number of <code class="code">check</code> instructions and other instructions (used in more complex cases).</p></li></ol></div><p>In both cases it is also possible to optionally specify:</p><div class="itemizedlist"><ul type="disc"><li><p>a specific <code class="code">error_message</code> to display to the user (overrides the default error message; can be used by UI frameworks).</p></li><li><p>a specific <code class="code">error_id</code> used to programmatically identify the error, e.g. for logging purposes and statistics.</p></li><li><p>a specific <code class="code">error_data</code> object that holds any useful information which can programmatically be explored.</p></li></ul></div><div class="example"><a name="attribute_list_check_example"></a><p class="title"><b>Example 6.1. <code class="code">attribute_check</code> example</b></p><div class="example-contents"><p>Suppose that a graphical user interface (GUI) library (or framework) supports automatic resizing of visual objects. For example, the width of a text input field increases automatically whenever the user increases the width of the window that contains the text input field. Many GUI libraries implement this feature with so-called layout managers who are responsible for defining the sizes of the visual objects. For that purpose, each visual object has a minimum size, maximum size, and preferred size, and the actual size on screen is computed by the layout manager who has to respect all visual objects' constraints. It is clear that for each visual object the maximum size must always be greater or equal to the minimum size, and the preferred and actual sizes must always be between the minimum and maximum sizes. As we can see, the validities of attributes depend on each other, so we have to use an <code class="code">attribute_check</code>.</p><p>As the size of a two-dimensional visual object is composed of a width and a height, we decide to define types <code class="code">widthable</code> and <code class="code">heightable</code>. <code class="code">widthable</code> could be coded as follows:</p><pre class="programlisting">type GUI_widthable

   attribute_list type:zero_positive32
      attribute minimum_width end
      attribute maximum_width end
      attribute preferred_width end

      attribute width kind:variable end // actual width on screen
   end

   attribute_check
      script
         check i_preferred_width &gt;= i_minimum_width and i_preferred_width &lt;= i_maximum_width
         check i_width &gt;= i_minimum_width and i_width &lt;= i_maximum_width
      end script
   end attribute_check

end type
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">It is not necessary to check the condition <code class="code">i_minimum_width &lt;= i_maximum_width</code>, because both checks above imply this condition.</td></tr></table></div><p>Type <code class="code">heightable</code> would be defined analogously to type <code class="code">widthable</code>. To show both possibilities, the following type uses an <code class="code">attribute_check</code> <span class="emphasis"><em>expression</em></span>, instead of an <code class="code">attribute_check</code> <span class="emphasis"><em>script</em></span>:</p><pre class="programlisting">type GUI_heightable

   attribute_list type:zero_positive32
      attribute minimum_height end
      attribute maximum_height end
      attribute preferred_height end

      attribute height kind:variable end // actual height on screen
   end

   attribute_check check: &amp;
      i_preferred_height &gt;= i_minimum_height and i_preferred_height &lt;= i_maximum_height and &amp;
      i_height &gt;= i_minimum_height and i_height &lt;= i_maximum_height end

end type
</pre></div></div><br class="example-break"><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="check_scripts.html#attribute_list_check_script" title="attribute_check script">the section called &#8220;<code class="code">attribute_check</code> script&#8221;</a></li><li><a href="error_handling_instructions.html#check_instruction" title="check instruction">the section called &#8220;<code class="code">check</code> instruction&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_default_property"></a>Attribute property <code class="code">default</code></h3></div></div></div><p>Property <code class="code">default</code> defines the attribute's value in case no value is explicitly defined in the source code.</p><p>As for property <code class="code">check</code>, there are two ways to define this property:</p><div class="orderedlist"><ol type="1"><li><p>by an expression (used in simple cases)</p><p>example:</p><div class="informalexample"><pre class="programlisting">type customer_5 default_factory:yes
   attribute identifier type:positive32 end
   attribute name type:string default: "unknown" end
end type</pre></div><p>In the above example <code class="code">name</code> will be <code class="code">"unknown"</code> if no other value is explicitly defined when the object is created. Thus, <code class="code">name</code> will be <code class="code">"unknown"</code> when we code:</p><pre class="programlisting">var customer_5 unknown_customer = fa_customer_5.co_create ( &amp;
   identifier = 123 )</pre><p>and <code class="code">name</code> will be <code class="code">"Ron"</code> in the following case:</p><pre class="programlisting">var customer_5 ron = fa_customer_5.co_create ( &amp;
   identifier = 123 &amp;
   name = "Ron" )</pre></li><li><p>by a script whose output argument holds the default value (used in more complex cases)</p><p>example:</p><div class="informalexample"><pre class="programlisting">type customer_6

   attribute identifier type:positive32
      default
         script
            var positive32 last_used_identifier
            // retrieve last used identifier from database:
            // last_used_identifier = ...
            o_identifier = last_used_identifier + 1
            // save o_identifier to database
         end script
      end default
   end attribute
      
   attribute name type:string end

end type</pre></div></li></ol></div><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="default_scripts.html#attribute_default_script" title="Attribute default script">the section called &#8220;Attribute <code class="code">default</code> script&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_private_property"></a>Attribute property <code class="code">private</code></h3></div></div></div><p>Factories and services can contain <code class="code">private</code> attributes which cannot be accessed from the outside, but which are needed internally by the factory or service. This property is not used in types.</p><p>For an example, please refer to <a href="factory.html#factory_two_creators_example" title="Example 5.6. Two creators and a private attribute in a factory">Example 5.6, &#8220;Two creators and a private attribute in a factory&#8221;</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_kind_property"></a>Attribute property <code class="code">kind</code></h3></div></div></div><p>Property <code class="code">kind</code> defines how the attribute's value can be read and written, as shown in the following table:</p><div class="table"><a name="attribute_kind_property_table"></a><p class="title"><b>Table 6.5. Attribute property <code class="code">kind</code></b></p><div class="table-contents"><table summary="Attribute property kind" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><thead><tr><th rowspan="2" valign="middle">value of property <code class="code">kind</code></th><th colspan="2" align="center">read/write permissions</th></tr><tr><th>attribute belongs to an object</th><th>attribute belongs to a service</th></tr></thead><tbody><tr><td><code class="code">constant</code></td><td>value is defined when object is created, and cannot be changed afterwards</td><td>value is defined the first time the service is used, and cannot be changed afterwards</td></tr><tr><td><code class="code">variable</code></td><td>initial value is defined when object is created, but value can be changed afterwards</td><td>initial value is defined the first time the service is used, but value can be changed afterwards</td></tr><tr><td><code class="code">readonly_constant</code></td><td colspan="2" align="center">value is defined through a get script that must always return the same value</td></tr><tr><td><code class="code">readonly_variable</code></td><td colspan="2" align="center">value is defined through a get script that can return a different value each time it is invoked</td></tr></tbody></table></div></div><br class="table-break"><p>example:</p><div class="informalexample"><pre class="programlisting">type person
   attribute first_name type:string kind:constant end            // first name never changes
                                                                 // ('kind:constant' could be omitted, 
                                                                 // because 'constant' is default value for 'kind')
   attribute last_name type:string kind:variable end             // last name can change, e.g. when woman gets maried
   attribute birthdate type:date end                             // birthdate never changes ('kind' defaults to 'constant')
   attribute age type:zero_positive32 kind:readonly_variable end // age changes each year, and depends on birthdate
end type</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">The default value for property <code class="code">kind</code> is <code class="code">constant</code> because objects in Obix are <span class="emphasis"><em>immutable</em></span> by default. For more information see <a href="object_immutability.html" title="Chapter 14. Object immutability">Chapter 14, <i>Object immutability</i></a>.</td></tr></table></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_setable_property"></a>Attribute property <code class="code">setable</code></h3></div></div></div><p>If property <code class="code">kind</code> is set to <code class="code">variable</code>, then property <code class="code">setable</code> defines which scripts are allowed to change the attribute's value, according to the following table:</p><div class="table"><a name="attribute_setable_property_table"></a><p class="title"><b>Table 6.6. Attribute property <code class="code">setable</code></b></p><div class="table-contents"><table summary="Attribute property setable" cellspacing="0" cellpadding="5" border="1"><colgroup><col><col></colgroup><thead><tr><th>Value of property <code class="code">setable</code></th><th>Description</th></tr></thead><tbody><tr><td><code class="code">all</code></td><td>value can be changed by any script</td></tr><tr><td><code class="code">factory</code></td><td>value can only be changed by a script in the factory that creates the object holding the attribute</td></tr><tr><td><code class="code">service</code></td><td>value can only be changed by a script in the service holding the attribute</td></tr><tr><td><code class="code">creator</code></td><td>value can only be changed by the creator script in the factory that creates the object holding the attribute</td></tr><tr><td><code class="code">none</code></td><td>value cannot be changed after initial value has been set</td></tr></tbody></table></div></div><br class="table-break"><p>example:</p><div class="informalexample"><pre class="programlisting">type person_2 default_factory:yes

   attribute_list type:string

      attribute first_name end             // attribute is immutable. it can only be set in the creator.
                                           // (property 'kind' defaults to 'constant', in which case
                                           // property 'setable' defaults to 'creator')
      attribute last_name &amp;
         kind:variable setable:factory end // only scripts in the factory that creates the object can change 'last_name'

      attribute city &amp;
         kind:variable setable:all end     // any script can change the value

   end attribute_list

end type</pre></div><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="object_immutability.html" title="Chapter 14. Object immutability">Chapter 14, <i>Object immutability</i></a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_get_property"></a>Attribute property <code class="code">get</code></h3></div></div></div><p>The value of property <code class="code">get</code> is a script that defines and returns the attribute's value. This script is executed each time the attribute's value is read. A <code class="code">get</code> script is used whenever the attribute's value is not simply a reference to an object stored in memory, but has to be determined by a more or less complex script.</p><p>example:</p><div class="informalexample"><pre class="programlisting">service stock_market
   attribute current_dow_jones_index type:positive32 kind:readonly_variable
      get
         script
            // connect to webservice and retrieve index
            // o_dow_jones_index = ...
         end
      end
   end
end</pre></div><p>The above script to retrieve the Dow Jones index from a webservice will be executed each time the attribute's value is read, such as when executing:</p><pre class="programlisting">var positive32 dow_jones_index = se_stock_market.a_current_dow_jones_index</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">In Obix attributes are always accessed with the syntax <code class="code">object.attribute_id</code> (e.g. <code class="code">customer.name</code>), even if a <code class="code">get</code> script is defined. There are no so-called "getters" like <code class="code">customer.getName()</code> in Java, C# and other languages.</td></tr></table></div><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="attribute_get_script.html" title="Attribute get script">the section called &#8220;Attribute get script&#8221;</a></li><li><a href="attribute_set_script.html" title="Attribute set script">the section called &#8220;Attribute set script&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_set_property"></a>Attribute property <code class="code">set</code></h3></div></div></div><p>The value of property <code class="code">set</code> is a script that is executed each time the attribute's value is changed. A <code class="code">set</code> script is used whenever the attribute's value is not simply a reference to an object stored in memory.</p><p>example:</p><div class="informalexample"><pre class="programlisting">service GUI
   attribute default_font_size type:positive32 kind:variable setable:all
      get
         script
            // retieve value from XML file
            // o_default_font_size = ...
         end
      end
      set
         script
            // write i_default_font_size to XML file
         end
      end
   end attribute
end service
</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">In Obix attribute values are always set with the syntax <code class="code">object.attribute_id = &lt;expression&gt;</code> (e.g. <code class="code">customer.city = "Luxembourg"</code>), even if a <code class="code">set</code> script is defined. There are no so-called "setters" like <code class="code">customer.setCity("Luxembourg")</code> in Java, C# and other languages.</td></tr></table></div><p>See also:</p><div class="itemizedlist"><ul type="disc"><li><a href="attribute_set_script.html" title="Attribute set script">the section called &#8220;Attribute set script&#8221;</a></li><li><a href="attribute_get_script.html" title="Attribute get script">the section called &#8220;Attribute get script&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_obsolete_property"></a>Attribute property <code class="code">obsolete</code></h3></div></div></div><p>Setting property <code class="code">obsolete</code> to <code class="code">yes</code> is a hint for the programmer to not use the attribute anymore. The attribute will possibly disappear in a future version of the software. The compiler might display a warning in case the attribute is used, but setting <code class="code">obsolete</code> to <code class="code">yes</code> doesn't change the behavior of the program.</p><p>example:</p><div class="informalexample"><pre class="programlisting">type person_3
   attribute_list type:string
      attribute name obsolete:yes end // replaced by first_name and last_name
      attribute first_name end
      attribute last_name end
   end
end type</pre></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_examples"></a>Examples</h3></div></div></div><p>For additional examples please refer to:</p><div class="itemizedlist"><ul type="disc"><li><a href="RSEs.html#type" title="Type">the section called &#8220;Type&#8221;</a></li><li><a href="factory.html" title="Factory">the section called &#8220;Factory&#8221;</a></li><li><a href="service.html" title="Service">the section called &#8220;Service&#8221;</a></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="attribute_see_also"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><a href="check_scripts.html#attribute_list_check_script" title="attribute_check script">the section called &#8220;<code class="code">attribute_check</code> script&#8221;</a></li><li><a href="attribute_check_script.html" title="Attribute check script">the section called &#8220;Attribute <code class="code">check</code> script&#8221;</a></li><li><a href="error_handling_instructions.html#check_instruction" title="check instruction">the section called &#8220;<code class="code">check</code> instruction&#8221;</a></li><li><a href="default_scripts.html#attribute_default_script" title="Attribute default script">the section called &#8220;Attribute <code class="code">default</code> script&#8221;</a></li><li><a href="attribute_get_script.html" title="Attribute get script">the section called &#8220;Attribute get script&#8221;</a></li><li><a href="attribute_set_script.html" title="Attribute set script">the section called &#8220;Attribute set script&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="command.html" title="Command">the section called &#8220;Command&#8221;</a></li><li><a href="event.html" title="Event">the section called &#8220;Event&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="RSEs.html#type" title="Type">the section called &#8220;Type&#8221;</a></li><li><a href="factory.html" title="Factory">the section called &#8220;Factory&#8221;</a></li><li><a href="service.html" title="Service">the section called &#8220;Service&#8221;</a></li></ul></div><div class="itemizedlist"><ul type="disc"><li><a href="void_values.html" title="Chapter 12. Void values">Chapter 12, <i>Void values</i></a></li><li><a href="object_immutability.html" title="Chapter 14. Object immutability">Chapter 14, <i>Object immutability</i></a></li><li><a href="feature_redefinition.html" title="Chapter 18. Feature redefinition">Chapter 18, <i>Feature redefinition</i></a></li><li><a href="design_by_contract_contract_programming.html" title="Chapter 17. Contract Programming, also called Design by Contract (TM)">Chapter 17, <i>Contract Programming, also called Design by Contract (TM)</i></a></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="service.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="language_basics.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="command.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Service </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Command</td></tr></table></div></body></html>
