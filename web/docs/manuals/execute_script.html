<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 2. How to write and execute script files?</title><link rel="stylesheet" href="obix_doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Obix programming language documentation"><link rel="up" href="tutorial_part_1.html" title="Part I. How to create and execute code"><link rel="prev" href="execute_instruction.html" title="Chapter 1. How to execute a single instruction?"><link rel="next" href="execute_java_script.html" title="Chapter 3. How to execute Java code in a script?"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29648172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. How to write and execute script files?</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="execute_instruction.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><th width="60%" align="center">Part I. How to create and execute code</th><td width="20%" align="right"> <a accesskey="n" href="execute_java_script.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="execute_script"></a>Chapter 2. How to write and execute script files?</h2></div></div></div><p>A <em class="firstterm">script</em> in Obix is a set of any number of source code instructions. A single script can be stored in a text file and then be executed by providing the script's path on the command line.</p><p>Example:</p><div class="itemizedlist"><ul type="disc"><li><p>Go to the <code class="code">tests</code> subdirectory you created in the previous chapter.</p></li><li><p>Use your preferred text editor and create a file named <code class="code">hello.osc</code> with the following content:</p><pre class="programlisting">system.console.write_line ( "Hello world" )</pre></li><li><p>Compile and execute the script by typing:</p><pre class="programlisting">on Linux:
../obix.sh hello.osc

on Windows:
..\obix hello.osc</pre></li><li><p><code class="code">Hello world</code> is displayed on the system console.</p></li></ul></div><br><p>All instructions available in Obix can be used in script files. For example, to create a simple loop displaying <code class="code">Hello world</code> 3 times, replace the code in the <code class="code">hello.osc</code> file you created in the previous step with the code below, then compile and execute it again.</p><pre class="programlisting">repeat 3 times
   system.console.write_line ( "Hello world" )
end</pre><br><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Within a script you can access input arguments which are provided on the command line. The command line arguments are available as a list of strings in input argument <code class="code">command_line_arguments</code>. The following script shows how to read the values:</p><pre class="programlisting">if i_command_line_arguments #r void then

   system.console.write_line ( "Number of command line arguments: " &amp; i_command_line_arguments.item_count.to_string )

   repeat for each string argument in i_command_line_arguments
      system.console.write_line ( argument )
   end

else
   system.console.write_line ( "There are no command line arguments." )

end if
</pre><p>Save the above source code in file <code class="code">tests/script_arguments_test.osc</code> and then execute it by entering the following command in your console:</p><pre class="programlisting">on Linux:
../obix.sh script_arguments_test.osc Hello Lisa Simpson

on Windows:
..\obix script_arguments_test.osc Hello Lisa Simpson</pre><p>The output displayed in your console will be:</p><pre class="screen">Number of command line arguments: 4
script_arguments_test.osc
Hello
Lisa
Simpson</pre><p>As you can see, the name of the script file is contained in the first argument.</p></td></tr></table></div><br><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you use a Unix-like system (e.g. Linux), you can turn an Obix script file into a first class executable, by using the so-called <a href="http://en.wikipedia.org/wiki/Shebang_(Unix)" target="_top">shebang syntax</a>.</p><p>For example, insert a first line as shown below in file <code class="code">hello.osc</code> (replace <code class="code">/usr/local/obix-0.7.4/</code> with Obix's root directory on your system) :</p><pre class="programlisting">#!/usr/local/obix-0.7.4/obix.sh
repeat 3 times
   system.console.write_line ( "Hello world" )
end</pre><p>Make <code class="code">hello.osc</code> executable with:</p><pre class="programlisting">chmod a+x hello.osc</pre><p>Now you can execute hello.osc by simply typing</p><pre class="programlisting">./hello.osc</pre></td></tr></table></div><br><p>Scripts can be very handy to quickly write small tests or tools you want to use on your PC, because you can use all instructions and all libraries available in Obix and Java, but without the need to create and maintain a project. For more examples please go to the <code class="code">projects</code> subdirectory and look for any directory that includes <code class="code">execute_script</code> in its name.</p><p>Sometimes you might want to use existing software components available in Java. In this case you can easily embed Java source code in a script. The next chapter shows how to do this.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="execute_instruction.html"><img src="images/prev.png" alt="Previous chapter" title="Previous chapter"></a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial_part_1.html"><img src="images/up.png" alt="Go up one level" title="Go up one level"></a></td><td width="40%" align="right"> <a accesskey="n" href="execute_java_script.html"><img src="images/next.png" alt="Next chapter" title="Next chapter"></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. How to execute a single instruction? </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Table of contents" title="Table of contents"></a></td><td width="40%" align="right" valign="top"> Chapter 3. How to execute Java code in a script?</td></tr></table></div></body></html>
